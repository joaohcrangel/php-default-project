<div class="page"><div class="page-content"><div class="panel panel-primary panel-line"><div class="panel-heading"><div class="row"><div class="col-sm-6"><h4 class="panel-title">Extrato</h4></div><div class="col-sm-6"><div id="datepicker" class="p-10 pull-sm-right"></div></div></div></div></div><div class="panel"><nav class="navbar navbar-default" role="navigation" style="min-height: inherit"><div class="container-fluid p-10"><div class="navbar-header"><button type="button" class="navbar-toggler hamburger hamburger-close collapsed" data-target="#example-navbar-collapse-3" data-toggle="collapse"><span class="sr-only">Toggle navigation</span> <span class="hamburger-bar"></span></button> <button type="button" class="btn btn-success waves-effect"><i class="icon md-plus" aria-hidden="true"></i> Novo</button></div><div class="collapse navbar-collapse pull-xs-right" id="example-navbar-collapse-3"><button type="button" class="btn btn-pure waves-effect"><i class="icon md-download" aria-hidden="true"></i> Exportar</button> <button type="button" class="btn btn-pure waves-effect"><i class="icon md-print" aria-hidden="true"></i> Imprimir</button></div></div></nav><table class="table table-striped table-hover"><thead><tr><th>Data<th>Lançamento<th>&nbsp;<th>Valor<th>Saldo<th>&nbsp;<tbody><tr><td>08/06/2017<td><span class="tag tag-primary">Vendas</span><td>(4/4) Venda 420417<td>400,00<td>91.570,45<td><button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Editar"><i class="icon md-edit" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Imprimir boleto"><i class="icon md-print" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Definir como pago"><i class="icon md-check-circle" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Excluir"><i class="icon md-delete" aria-hidden="true"></i></button><tr><td>08/06/2017<td><span class="tag tag-primary">Vendas</span><td>(4/4) Venda 420417<td>400,00<td>91.570,45<td><button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Editar"><i class="icon md-edit" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Imprimir boleto"><i class="icon md-print" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Definir como pago"><i class="icon md-check-circle" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Excluir"><i class="icon md-delete" aria-hidden="true"></i></button><tr><td>08/06/2017<td><span class="tag tag-primary">Vendas</span><td>(4/4) Venda 420417<td>400,00<td>91.570,45<td><button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Editar"><i class="icon md-edit" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Imprimir boleto"><i class="icon md-print" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Definir como pago"><i class="icon md-check-circle" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Excluir"><i class="icon md-delete" aria-hidden="true"></i></button><tr><td>08/06/2017<td><span class="tag tag-primary">Vendas</span><td>(4/4) Venda 420417<td>400,00<td>91.570,45<td><button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Editar"><i class="icon md-edit" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Imprimir boleto"><i class="icon md-print" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Definir como pago"><i class="icon md-check-circle" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Excluir"><i class="icon md-delete" aria-hidden="true"></i></button><tr><td>08/06/2017<td><span class="tag tag-primary">Vendas</span><td>(4/4) Venda 420417<td>400,00<td>91.570,45<td><button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Editar"><i class="icon md-edit" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Imprimir boleto"><i class="icon md-print" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Definir como pago"><i class="icon md-check-circle" aria-hidden="true"></i></button> <button type="button" class="btn btn-sm btn-icon btn-flat btn-default waves-effect" data-toggle="tooltip" data-original-title="Excluir"><i class="icon md-delete" aria-hidden="true"></i></button></table><div class="panel-footer"><div class="row"><div class="col-sm-6"><div class="panel"><div class="table-responsive"><table class="table"><tr><td>Total de Recebimentos* (R$)<td class="text-xs-right"><span class="green-500">24.400,00</span><tr><td>Total de Pagamentos* (R$)<td class="text-xs-right"><span class="red-500">-2.907,07</span><tr><td>Total do Período* (R$)<td class="text-xs-right">21.492,93</table></div></div></div><div class="col-sm-6"><div class="panel"><div class="table-responsive"><table class="table"><tr><td>Número de Lançamento<td class="text-xs-right">7<tr><td>Número de Lançamentos Selecionados<td class="text-xs-right">0<tr><td>Total de Lançamentos Selecionados (R$)<td class="text-xs-right">0,00</table></div></div></div></div></div></div></div></div><script>init.push(function(){

	(function($){

	 	$.fn.extend({

	 		dateStartEnd:function(options) {

	 			var defaults = {
					debug:false,
					cache:true,
					start:moment(),
					end:moment(),
					url:'',
					tpl:Handlebars.compile(
					  '<div class="date-start-end-wrap">'+
						'<div class="dropdown">'+
		                    '<button type="button" class="btn btn-default dropdown-toggle waves-effect" data-toggle="dropdown" aria-expanded="false">'+  
		                    '</button>'+
		                    '<div class="dropdown-menu dropdown-menu-right" role="menu">'+
		                      '<a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-action="today">Hoje</a>'+
		                      '<a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-action="thisweek">Esta semana</a>'+
		                      '<a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-action="thismonth">Este mês</a>'+
		                      '<a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-action="days30">Últimos 30 dias</a>'+
		                      '<div class="dropdown-divider"></div>'+
		                      '<a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-action="custom">Escolha o período...</a>'+
		                    '</div>'+
		                '</div>'+
		                '<div class="input-daterange" style="display:none;">'+
		                    '<div class="input-group">'+
		                      '<span class="input-group-addon">'+
		                        '<i class="icon md-calendar" aria-hidden="true"></i>'+
		                      '</span>'+
		                      '<input type="text" class="form-control" name="start" />'+
		                    '</div>'+
		                    '<div class="input-group">'+
		                      '<span class="input-group-addon">até</span>'+
		                      '<input type="text" class="form-control" name="end" />'+
		                    '</div>'+
		                '</div>'+
		              '</div>'
					),
					selected:function(){},
					failure:function(){}
				};

				var o =  $.extend(defaults, options);

				if (o.start instanceof Date) o.start = moment(o.start);
				if (o.end instanceof Date) o.end = moment(o.end);

				if(o.debug === true) console.info("options", o);

	    		return this.each(function() {

	    			var t = this;
	    			var $el = $(t);
	    			var $wrap = $(o.tpl(o));

	    			t.intiEvents = function(){

	    				$wrap.find("[data-action]").on("click", function(){

	    					switch ($(this).data("action")) {

	    						case 'today':
	    						var today = moment();
	    						o.start = today;
	    						o.end = today;
	    						t.selected();
	    						break;

	    						case 'thisweek':
	    						var start = moment();
	    						var end = moment();

	    						while (start.isoWeekday() !== 7) {
	    							start.subtract(1, 'days');
	    						}

	    						while (end.isoWeekday() !== 6) {
	    							end.add(1, 'days');
	    						}

	    						o.start = start;
	    						o.end = end;
	    						t.selected();
	    						break;

	    						case 'thismonth':
	    						var start = new Date(new Date().getFullYear(), new Date().getMonth(), 1);
								var end = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0);

								start = moment(start);
								end = moment(end);

	    						o.start = start;
	    						o.end = end;
	    						t.selected();
	    						break;

	    						case 'days30':
	    						var start = moment();
	    						var end = moment();

	    						start.subtract(30, 'days');

	    						o.start = start;
	    						o.end = end;
	    						t.selected();
	    						break;

	    						case 'custom':
	    						$wrap.find(".dropdown").hide();

	    						var $daterange = $wrap.find(".input-daterange");

	    						$daterange.datepicker({
	    							format: "dd/mm/yyyy",
    								language: "pt-BR",
    								autoclose: true,
    								todayHighlight: true
	    						}).on("changeDate", function(e){

	    							o.start = moment($daterange.datepicker('getStartDate'));
	    							o.end = moment($daterange.datepicker('getEndDate'));

	    							if (e.target.name === "start")$daterange.show().find('[name=end]').focus();

	    							t.selected();

	    						});

	    						$daterange.show().find('[name=start]').focus();
	    						break;

	    					}

	    					$wrap.find(".dropdown-item").removeClass('selected');
	    					$(this).addClass('selected');

	    				});

	    			};

	    			t.setDisplayDates = function () {

	    				if (o.debug === true) console.log($wrap.find(".btn.dropdown-toggle"));
	    				$wrap.find(".btn.dropdown-toggle").text(o.start.format("DD MMMM YYYY")+" - "+o.end.format("DD MMMM YYYY"));


	    			};

	    			t.selected = function () {

	    				t.setDisplayDates();
	    				if (typeof o.selected === 'function') o.selected(o.start.toDate(), o.end.toDate());

	    			};

	    			t.init = function(){

	    				t.intiEvents();
	    				t.setDisplayDates();

	    				$el.html($wrap);

	    			};

	    			t.init();

	    		});

	    	}

	    });

	 })(jQuery);

	$("#datepicker").dateStartEnd({
		selected:function(dt1, dt2){

			console.log(dt1, dt2);
			console.log(dt1.getFullYear(), dt1.getMonth(), dt1.getDate());

		}
	});

});</script>
<style>
.slidePanel{
	overflow: overlay;
}
</style>
<header class="slidePanel-header">
<div class="overlay-top overlay-panel overlay-background bg-indigo-600">
<div class="slidePanel-actions btn-group btn-group-flat" aria-label="actions" role="group">
  <button type="button" class="btn btn-pure slidePanel-close icon md-close" aria-hidden="true"></button>
</div>
<h4 class="stage-name"><h5 class="taskboard-stage-title text-uppercase">Novo Usu치rio</h5></h4>
</div>  
</header>
<div class="slidePanel-inner m-0 p-0">

	<div class="panel">

	    <div class="panel-body p-t-20">
	        <div class="tab-pane active" aria-expanded="true">
				<form id="form-user-new">
					
					<div class="form-group form-material" data-plugin="formMaterial">
						<label class="form-control-label">Tipo de Usu치rio</label>
						<select name="idusertype" class="form-control"></select>
					</div>

					<div class="form-group form-material" data-plugin="formMaterial">
						<label class="form-control-label">Pessoa</label>
						<input type="hidden" name="idperson">
					</div>

					<div class="form-group form-material" data-plugin="formMaterial">
						<label class="form-control-label">Usu치rio</label>
						<input type="text" name="desuser" class="form-control">
					</div>

					<div class="form-group form-material" data-plugin="formMaterial">
						<label class="form-control-label">Senha</label>
						<input type="password" name="despassword" class="form-control">
					</div>

					<div class="form-group form-material" data-plugin="formMaterial">
						<button type="submit" class="btn btn-primary waves-effect">Salvar</button>
					</div>
				</form>
	        </div>
	    </div>

	</div>

</div>

<script>

$("#form-user-new [name=idperson]").pickerPerson();

$("#form-user-new [name=idusertype]").combobox({
	url:PATH+"/userstypes",
	displayField:"desusertype",
	valueField:"idusertype"
});

var form = $("#form-user-new").form({
	url:PATH+"/users",
	success:function(){
		System.success("Usu치rio criado com sucesso");
		$(".slidePanel-close").trigger("click");
		if (typeof loadUsers === 'function') loadUsers();
	},
	failure:function(r){
		System.showError(r);
	}
});

</script>